# LC-0227.Basic Calculator II

Given a string `s` which represents an expression, _evaluate this expression and return its value_.
The integer division should truncate toward zero.
**Example 1:**

```text
Input: s = "3+2*2"
Output: 7
```

**Example 2:**

```text
Input: s = " 3/2 "
Output: 1
```

**Example 3:**

```text
Input: s = " 3+5 / 2 "
Output: 5
```

**Constraints:**

-   `1 <= s.length <= 3 * 10^5`
-   `s` consists of integers and operators `('+', '-', '*', '/')` separated by some number of spaces.
-   `s` represents **a valid expression**.
-   All the integers in the expression are non-negative integers in the range `[0, 2^31 - 1]`.
-   The answer is **guaranteed** to fit in a **32-bit integer**.

## Solution

```javascript
/**
 * @param {string} s
 * @return {number}
 */
var calculate = function (s) {
    const st = [];
    let preSign = "+"; // 前一个运算符
    let tempNum = 0; // 临时数字
    for (let i = 0; i < s.length; i++) {
        if (!isNaN(parseInt(s.charAt(i)))) {
            tempNum = tempNum * 10 + parseInt(s.charAt(i));
        }
        if (
            i === s.length - 1 ||
            (isNaN(parseInt(s.charAt(i))) && s.charAt(i) !== " ")
        ) {
            switch (preSign) {
                case "+":
                    st.push(tempNum);
                    break;
                case "-":
                    st.push(-tempNum);
                    break;
                case "*":
                    st.push(st.pop() * tempNum);
                    break;
                case "/":
                    st.push(Math.trunc(st.pop() / tempNum)); // 注意通过舍弃小数位取整
                    break;
                default:
                    break;
            }
            preSign = s.charAt(i);
            tempNum = 0;
        }
    }

    let ans = 0;
    while (st.length) ans += st.pop();
    return ans;
};
```
